<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResearchMapè©³ç´°åˆ†æ</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .researcher-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .researcher-name {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .affiliation {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .scores-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .score-card {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .score-value {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .score-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .section-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-icon {
            font-size: 1.2em;
        }
        
        .analysis-text {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            white-space: pre-line;
        }
        
        .keywords-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .keyword-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            border: 1px solid #bbdefb;
        }
        
        .papers-list, .projects-list, .presentations-list, .patents-list {
            list-style: none;
        }
        
        .paper-item, .project-item, .presentation-item, .patent-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #4caf50;
            transition: transform 0.2s;
        }
        
        .paper-item:hover, .project-item:hover, .presentation-item:hover, .patent-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .paper-year, .project-period {
            display: inline-block;
            background: #e8f5e9;
            color: #2e7d32;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-bottom: 10px;
        }
        
        .paper-title, .project-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        
        .paper-journal {
            color: #666;
            font-style: italic;
        }
        
        .project-item {
            border-left-color: #ff9800;
        }
        
        .project-period {
            background: #fff3e0;
            color: #e65100;
        }
        
        .presentation-item {
            border-left-color: #9c27b0;
        }
        
        .presentation-date {
            background: #f3e5f5;
            color: #6a1b9a;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .patent-item {
            border-left-color: #2196f3;
        }
        
        .patent-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
        
        .patent-info-item {
            display: flex;
            flex-direction: column;
        }
        
        .patent-info-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
        }
        
        .spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #f44336;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
            font-style: italic;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
        </div>
        
        <div id="content" style="display: none;">
            <!-- ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ† -->
            <div class="header" id="header-section">
                <div class="researcher-info">
                    <div>
                        <h1 class="researcher-name" id="researcher-name">èª­ã¿è¾¼ã¿ä¸­...</h1>
                        <div class="affiliation" id="affiliation">æ‰€å±æƒ…å ±èª­ã¿è¾¼ã¿ä¸­...</div>
                    </div>
                </div>
                
                <div class="scores-container" id="scores-container">
                    <!-- ã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰ãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </div>
            </div>
            
            <!-- çµ±è¨ˆæƒ…å ± -->
            <div class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ“Š</span>
                    ç ”ç©¶æ´»å‹•çµ±è¨ˆ
                </h2>
                <div class="stats-grid" id="stats-grid">
                    <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </div>
            </div>
            
            <!-- AIåˆ†æçµæœ -->
            <div class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ¤–</span>
                    AIè©³ç´°åˆ†æ
                </h2>
                <div class="analysis-text" id="detailed-analysis">
                    åˆ†æçµæœã‚’èª­ã¿è¾¼ã¿ä¸­...
                </div>
            </div>
            
            <!-- ç ”ç©¶ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ -->
            <div class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ”</span>
                    ç ”ç©¶ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
                </h2>
                <div class="keywords-container" id="keywords-container">
                    <!-- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚¿ã‚°ãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </div>
            </div>
            
            <!-- ä¸»è¦è«–æ–‡ -->
            <div class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ“„</span>
                    ä¸»è¦è«–æ–‡
                </h2>
                <ul class="papers-list" id="papers-list">
                    <!-- è«–æ–‡ãƒªã‚¹ãƒˆãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </ul>
            </div>
            
            <!-- ä¸»è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ -->
            <div class="content-section">
                <h2 class="section-title">
                    <span class="section-icon">ğŸš€</span>
                    ä¸»è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
                </h2>
                <ul class="projects-list" id="projects-list">
                    <!-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªã‚¹ãƒˆãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </ul>
            </div>
            
            <!-- æœ€è¿‘ã®ç™ºè¡¨ -->
            <div class="content-section" id="presentations-section" style="display: none;">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ¤</span>
                    æœ€è¿‘ã®ç™ºè¡¨
                </h2>
                <ul class="presentations-list" id="presentations-list">
                    <!-- ç™ºè¡¨ãƒªã‚¹ãƒˆãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </ul>
            </div>
            
            <!-- ç‰¹è¨±æƒ…å ± -->
            <div class="content-section" id="patents-section" style="display: none;">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ’¡</span>
                    ä¸»è¦ç‰¹è¨±
                </h2>
                <ul class="patents-list" id="patents-list">
                    <!-- ç‰¹è¨±ãƒªã‚¹ãƒˆãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </ul>
            </div>
        </div>
        
        <div id="error" class="error-message" style="display: none;">
            ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚
        </div>
    </div>
    
    <script>
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        function getAnalysisData() {
            const urlParams = new URLSearchParams(window.location.search);
            const encodedData = urlParams.get('data');
            
            if (encodedData) {
                try {
                    // Base64ãƒ‡ã‚³ãƒ¼ãƒ‰
                    const jsonString = atob(encodedData);
                    return JSON.parse(jsonString);
                } catch (e) {
                    console.error('ãƒ‡ãƒ¼ã‚¿ã®ãƒ‡ã‚³ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ:', e);
                    return null;
                }
            }
            
            // ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
            return getDemoData();
        }
        
        // ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿
        function getDemoData() {
            return {
                researcher_name: "å±±ç”° å¤ªéƒ",
                affiliation: "æ±äº¬å¤§å­¦ å·¥å­¦éƒ¨",
                scores: {
                    total: 85,
                    technical_relevance: 34,
                    achievements: 26,
                    practical_applicability: 25
                },
                research_keywords: ["äººå·¥çŸ¥èƒ½", "æ©Ÿæ¢°å­¦ç¿’", "æ·±å±¤å­¦ç¿’", "è‡ªç„¶è¨€èªå‡¦ç†", "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ§ãƒ³"],
                total_papers: 45,
                total_projects: 8,
                total_awards: 3,
                total_presentations: 12,
                total_patents: 5,
                detailed_analysis: "ã“ã®ç ”ç©¶è€…ã¯ã€Œäººå·¥çŸ¥èƒ½ã€ã«é–¢ã™ã‚‹å°‚é–€çš„ãªç ”ç©¶ã‚’è¡Œã£ã¦ãŠã‚Šã€ç‰¹ã«ä»¥ä¸‹ã®ç‚¹ã§å„ªã‚Œã¦ã„ã¾ã™ï¼š\n\n1. æŠ€è¡“çš„é–¢é€£æ€§ï¼šäººå·¥çŸ¥èƒ½ã«ç›´æ¥é–¢é€£ã™ã‚‹è«–æ–‡ã‚’è¤‡æ•°ç™ºè¡¨ã—ã¦ãŠã‚Šã€ãã®ç ”ç©¶å†…å®¹ã¯è¦æ±‚ã•ã‚Œã‚‹æŠ€è¡“é ˜åŸŸã¨é«˜ã„æ•´åˆæ€§ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ç‰¹ã«æ·±å±¤å­¦ç¿’ã¨è‡ªç„¶è¨€èªå‡¦ç†ã®åˆ†é‡ã§é¡•è‘—ãªæˆæœã‚’ä¸Šã’ã¦ã„ã¾ã™ã€‚\n\n2. å®Ÿç¸¾ãƒ»å½±éŸ¿åŠ›ï¼šNature Machine Intelligenceã‚„ICMLç­‰ã®ãƒˆãƒƒãƒ—ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ãƒ»ä¼šè­°ã¸ã®æ²è¼‰å®Ÿç¸¾ãŒã‚ã‚Šã€è¤‡æ•°ã®ç‰¹è¨±å–å¾—ã‚„å­¦ä¼šè³å—è³æ­´ãŒã‚ã‚‹ãªã©ã€ç ”ç©¶æˆæœã®è³ªã®é«˜ã•ãŒèªã‚ã‚‰ã‚Œã¾ã™ã€‚\n\n3. å®Ÿç”¨åŒ–å¯èƒ½æ€§ï¼šç”£å­¦é€£æºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®çµŒé¨“ãŒè±Šå¯Œã§ã€ä¼æ¥­ã¨ã®å…±åŒç ”ç©¶ã‚’é€šã˜ã¦ç ”ç©¶æˆæœã®ç¤¾ä¼šå®Ÿè£…ã«å‘ã‘ãŸå®Ÿç¸¾ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«AIã®åŒ»ç™‚å¿œç”¨ã«é–¢ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å®Ÿç”¨åŒ–ã«æˆåŠŸã—ã¦ã„ã¾ã™ã€‚\n\nç·åˆçš„ã«ã€ã“ã®ç ”ç©¶è€…ã¯äººå·¥çŸ¥èƒ½ã®åˆ†é‡ã§éå¸¸ã«é«˜ã„å°‚é–€æ€§ã¨å®Ÿç¸¾ã‚’æŒã£ã¦ãŠã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è²¢çŒ®ãŒå¤§ã„ã«æœŸå¾…ã§ãã¾ã™ã€‚",
                top_papers: [
                    {
                        year: 2023,
                        title_ja: "æ·±å±¤å­¦ç¿’ã‚’ç”¨ã„ãŸåŒ»ç™‚ç”»åƒè¨ºæ–­æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™º",
                        journal: "Nature Machine Intelligence"
                    },
                    {
                        year: 2022,
                        title_ja: "å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã®åŠ¹ç‡çš„ãªå­¦ç¿’æ‰‹æ³•ã«é–¢ã™ã‚‹ç ”ç©¶",
                        journal: "ICML 2022"
                    },
                    {
                        year: 2021,
                        title_ja: "èª¬æ˜å¯èƒ½AIã®ãŸã‚ã®æ–°ã—ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ",
                        journal: "IEEE Transactions on Neural Networks"
                    }
                ],
                key_projects: [
                    {
                        title: "JST CREST AIã«ã‚ˆã‚‹æ¬¡ä¸–ä»£åŒ»ç™‚è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ ",
                        period: "2021-2024"
                    },
                    {
                        title: "NEDO AIç¤¾ä¼šå®Ÿè£…ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
                        period: "2020-2023"
                    },
                    {
                        title: "ç§‘ç ”è²»åŸºç›¤(A) èª¬æ˜å¯èƒ½AIã®åŸºç¤ç†è«–",
                        period: "2019-2022"
                    }
                ],
                recent_presentations: [
                    {
                        title: "åŒ»ç™‚AIã®æœ€æ–°å‹•å‘ã¨ä»Šå¾Œã®å±•æœ›",
                        event: "æ—¥æœ¬äººå·¥çŸ¥èƒ½å­¦ä¼šå…¨å›½å¤§ä¼š",
                        date: "2023-06-08",
                        type: "æ‹›å¾…è¬›æ¼”"
                    },
                    {
                        title: "Deep Learning for Medical Image Analysis",
                        event: "CVPR 2023",
                        date: "2023-06-20",
                        type: "å£é ­ç™ºè¡¨"
                    }
                ],
                key_patents: [
                    {
                        title: "æ·±å±¤å­¦ç¿’ã‚’ç”¨ã„ãŸåŒ»ç™‚ç”»åƒè§£æè£…ç½®åŠã³æ–¹æ³•",
                        application_number: "ç‰¹é¡˜2023-123456",
                        patent_number: "ç‰¹è¨±ç¬¬6789012å·",
                        application_date: "2023/04/01",
                        inventors: "å±±ç”°å¤ªéƒã€éˆ´æœ¨èŠ±å­ã€ä½è—¤æ¬¡éƒ"
                    },
                    {
                        title: "è‡ªç„¶è¨€èªå‡¦ç†ã«ã‚ˆã‚‹è¨ºæ–­æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ",
                        application_number: "ç‰¹é¡˜2022-987654",
                        patent_number: "ï¼ˆå¯©æŸ»ä¸­ï¼‰",
                        application_date: "2022/09/15",
                        inventors: "å±±ç”°å¤ªéƒã€ç”°ä¸­ä¸€éƒ"
                    },
                    {
                        title: "AIã‚’æ´»ç”¨ã—ãŸç•°å¸¸æ¤œçŸ¥æ–¹æ³•",
                        application_number: "ç‰¹é¡˜2021-555555",
                        patent_number: "ç‰¹è¨±ç¬¬6543210å·",
                        application_date: "2021/12/01",
                        inventors: "å±±ç”°å¤ªéƒ"
                    }
                ]
            };
        }
        
        // ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
        function displayData(data) {
            // ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±
            document.getElementById('researcher-name').textContent = data.researcher_name || 'åå‰ä¸æ˜';
            document.getElementById('affiliation').textContent = data.affiliation || 'æ‰€å±ä¸æ˜';
            
            // ã‚¹ã‚³ã‚¢è¡¨ç¤º
            if (data.scores) {
                const scoresContainer = document.getElementById('scores-container');
                scoresContainer.innerHTML = `
                    <div class="score-card">
                        <div class="score-value">${data.scores.total || 0}</div>
                        <div class="score-label">ç·åˆã‚¹ã‚³ã‚¢</div>
                    </div>
                    <div class="score-card">
                        <div class="score-value">${data.scores.technical_relevance || 0}/40</div>
                        <div class="score-label">æŠ€è¡“çš„é–¢é€£æ€§</div>
                    </div>
                    <div class="score-card">
                        <div class="score-value">${data.scores.achievements || 0}/30</div>
                        <div class="score-label">å®Ÿç¸¾ãƒ»å½±éŸ¿åŠ›</div>
                    </div>
                    <div class="score-card">
                        <div class="score-value">${data.scores.practical_applicability || 0}/30</div>
                        <div class="score-label">å®Ÿç”¨åŒ–å¯èƒ½æ€§</div>
                    </div>
                `;
            }
            
            // çµ±è¨ˆæƒ…å ±
            const statsGrid = document.getElementById('stats-grid');
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${data.total_papers || 0}</div>
                    <div class="stat-label">è«–æ–‡æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${data.total_projects || 0}</div>
                    <div class="stat-label">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${data.total_awards || 0}</div>
                    <div class="stat-label">å—è³æ­´</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${data.total_presentations || 0}</div>
                    <div class="stat-label">ç™ºè¡¨æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${data.total_patents || 0}</div>
                    <div class="stat-label">ç‰¹è¨±æ•°</div>
                </div>
            `;
            
            // è©³ç´°åˆ†æ
            document.getElementById('detailed-analysis').textContent = data.detailed_analysis || 'åˆ†æçµæœãªã—';
            
            // ç ”ç©¶ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
            if (data.research_keywords && data.research_keywords.length > 0) {
                const keywordsContainer = document.getElementById('keywords-container');
                keywordsContainer.innerHTML = data.research_keywords
                    .map(keyword => `<span class="keyword-tag">${keyword}</span>`)
                    .join('');
            }
            
            // ä¸»è¦è«–æ–‡
            if (data.top_papers && data.top_papers.length > 0) {
                const papersList = document.getElementById('papers-list');
                papersList.innerHTML = data.top_papers
                    .map(paper => `
                        <li class="paper-item">
                            <span class="paper-year">${paper.year}</span>
                            <div class="paper-title">${paper.title_ja || paper.title_en || 'é¡Œåãªã—'}</div>
                            <div class="paper-journal">${paper.journal || 'æ²è¼‰èªŒä¸æ˜'}</div>
                        </li>
                    `)
                    .join('');
            } else {
                document.getElementById('papers-list').innerHTML = '<li class="empty-state">è«–æ–‡æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“</li>';
            }
            
            // ä¸»è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
            if (data.key_projects && data.key_projects.length > 0) {
                const projectsList = document.getElementById('projects-list');
                projectsList.innerHTML = data.key_projects
                    .map(project => `
                        <li class="project-item">
                            <span class="project-period">${project.period}</span>
                            <div class="project-title">${project.title}</div>
                        </li>
                    `)
                    .join('');
            } else {
                document.getElementById('projects-list').innerHTML = '<li class="empty-state">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“</li>';
            }
            
            // æœ€è¿‘ã®ç™ºè¡¨ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤ºï¼‰
            if (data.recent_presentations && data.recent_presentations.length > 0) {
                document.getElementById('presentations-section').style.display = 'block';
                const presentationsList = document.getElementById('presentations-list');
                presentationsList.innerHTML = data.recent_presentations
                    .map(pres => `
                        <li class="presentation-item">
                            <span class="presentation-date">${pres.date} - ${pres.type}</span>
                            <div class="paper-title">${pres.title}</div>
                            <div class="paper-journal">${pres.event}</div>
                        </li>
                    `)
                    .join('');
            }
            
            // ç‰¹è¨±æƒ…å ±ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤ºï¼‰
            if (data.key_patents && data.key_patents.length > 0) {
                document.getElementById('patents-section').style.display = 'block';
                const patentsList = document.getElementById('patents-list');
                patentsList.innerHTML = data.key_patents
                    .map(patent => `
                        <li class="patent-item">
                            <div class="paper-title">${patent.title}</div>
                            <div class="patent-info">
                                <div class="patent-info-item">
                                    <span class="patent-info-label">å‡ºé¡˜ç•ªå·</span>
                                    <span>${patent.application_number || 'ä¸æ˜'}</span>
                                </div>
                                <div class="patent-info-item">
                                    <span class="patent-info-label">ç‰¹è¨±ç•ªå·</span>
                                    <span>${patent.patent_number || 'ï¼ˆå¯©æŸ»ä¸­ï¼‰'}</span>
                                </div>
                                <div class="patent-info-item">
                                    <span class="patent-info-label">å‡ºé¡˜æ—¥</span>
                                    <span>${patent.application_date || 'ä¸æ˜'}</span>
                                </div>
                                <div class="patent-info-item">
                                    <span class="patent-info-label">ç™ºæ˜è€…</span>
                                    <span>${patent.inventors || 'ä¸æ˜'}</span>
                                </div>
                            </div>
                        </li>
                    `)
                    .join('');
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
        window.addEventListener('DOMContentLoaded', function() {
            const data = getAnalysisData();
            
            if (data) {
                displayData(data);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';
            } else {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
            }
        });
    </script>
</body>
</html>
